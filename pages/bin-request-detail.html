<div class="modal fade" id="confirmStatus" tabindex="-1" role="dialog" aria-labelledby="confirmStatus"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Confirm Status?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="binSize form-label">Bin Size</label>
                            <input type="text" class="form-control" id="binSize" data-ng-model="entry.binSize" />
                        </div>

                    </div>
                    <p style="padding-top: 40px;">X</p>
                    <div class="col-md-5">
                        <div class="form-group">
                            <label for="noOfBin form-label">No. of Bins</label>
                            <input type="text" class="form-control" id="noOfBin" data-ng-model="entry.unit" />
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="txtRemarks form-label">Remarks </label>
                    <textarea class="form-control" rows="4" id="txtRemarks" data-ng-model="entry.remarks"></textarea>
                </div>

                <div class="form-group">
                    <label for="acrBin form-label">ACR Bin</label>
                    <div class="radio">
                        <label style="padding-right: 20px;" class="radio-inline"><input type="radio"
                                ng-model="entry.acrBin" value="yes"> Yes</label>
                        <label style="padding-right: 20px;" class="radio-inline"><input type="radio"
                                ng-model="entry.acrBin" value="no"> No</label>

                    </div>
                </div>
                <div class="form-group" data-ng-show="entry.acrBin == 'yes'">
                    <label for="txtACRF form-label">ACRF Number</label>
                    <input type="text" class="form-control" id="txtACRF" data-ng-model="entry.acrfNumber" />
                </div>

                <div class="row" data-ng-show="entry.acrBin == 'yes'">
                    <div class="col-md-5">
                        <div class="form-group">
                            <label for="acrFrom form-label">From</label>
                            <input type="date" class="form-control" id="acrFrom" data-ng-model="entry.from" />
                        </div>

                    </div>
                    <div class="col-md-1">
                        <p style="padding-top: 40px; text-align: center;">-</p>
                    </div>

                    <div class="col-md-5">
                        <div class="form-group">
                            <label for="acrTo form-label">To </label>
                            <input type="date" class="form-control" id="acrTo" data-ng-model="entry.to" />
                        </div>
                    </div>
                </div>

                <div class="form-group" data-ng-show="entry.acrBin == 'yes'">
                    <label for="beBinsUnits form-label">BE Bins/Units</label>
                    <input type="text" class="form-control" id="beBinsUnits" data-ng-model="entry.beBins" />
                </div>

                <div class="form-group" data-ng-show="entry.acrBin == 'yes'">
                    <label for="acrBinsUnits form-label">ACR Bins/Units</label>
                    <input type="text" class="form-control" id="acrBinsUnits" data-ng-model="entry.acrBins" />
                </div>




            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-ng-click="confirmStatus();">Confirm</button>
            </div>
        </div>
    </div>
</div>

<style>
    img {
        max-width: 250px;
    }
</style>
<div class="container" >
    <div class="row">
        <div class="col-md-12">
            <h1>Request Detail - {{req.id}}</h1><br /><br />
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="row" data-ng-show="reqDetail.reason.indexOf('Roro') == -1">
                <div class="col-md-12">
                    <label for="binReqSlt1" ><strong>Status of Request: </strong></label>
                    <select id="binReqSlt1" name="binReqStatus" data-ng-model="reqDetail.status" class="form-control" style="width: 150px;" onchange="showRejectReasonSelect(this)">
                        <option value="PENDING">Pending</option>
                        <option value="Approved">Approved</option>
                        <option value="Completed">Completed</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Rejected">Rejected</option>
                    </select>
                    <br/>
                    <div id="binReqRejectReason">
                        <label for="rejslt1"><strong>Reason for rejection:</strong></label>
                        <select id="rejslt1" name="binReqRejectReason" data-ng-model="reqDetail.rejectReason" class="form-control" style="width: 150px;">
                            <option value="Image not clear">Image not clear</option>
                            <option value="More documents needed">More documents needed</option>
                            <option value="Invalid address">Invalid address</option>
                            <option value="Others">Others</option>
                        </select>
                        <br/>
                        <label for="BinRejInfo"><strong>Rejection extra info given to customer:</strong></label><br/>
                        <textarea id="BinRejInfo" type="text" class="form-contol" data-ng-model="reqDetail.rejectExtraInfo"></textarea>
                    </div>
                    <button class="btn btn-sm btn-primary" data-ng-click="saveBinRequestStatus(reqDetail.status, reqDetail.reqID, reqDetail.rejectReason, reqDetail.rejectExtraInfo)">Update</button>
                </div>
            </div>
            
            <div class="row" data-ng-show="reqDetail.reason.indexOf('Roro') != -1">
                <div class="col-md-12">
                    <label for="binReqSlt2"><strong>Status of Request: </strong></label>
                    <select id="binReqSlt2" name="binReqStatus" data-ng-model="reqDetail.status" class="form-control" style="width: 150px;" onchange="showRejectReasonRoroSelect(this)">
                        <option value="PENDING">Pending</option>
                        <option value="Quoted">Quoted</option>
                        <option value="Accepted">Accepted</option>
                        <option value="Rejected">Rejected</option>
                    </select>
                    <div id="binReqRejectReasonRoro">
                        <label for="rejslt2">Reason for rejection</label>
                        <input id="rejslt2" type="" list="roroRejectReason" name="binReqRejectReason" data-ng-model="reqDetail.rejectReason" class="form-control" style="width: 150px;">
                        <datalist id="roroRejectReason">
                            <option value="Price">Price</option>
                            <option value="Waiting Time">Waiting Time</option>
                        </datalist>
                    </div>
                    <button class="btn btn-sm btn-primary" data-ng-click="saveBinRequestStatus(reqDetail.status, reqDetail.reqID, reqDetail.rejectReason, reqDetail.rejectExtraInfo)">Update</button>
                </div>
            </div>

            <p data-ng-show="reqDetail.rejectReason != '' && reqDetail.rejectReason != 'undefined'"><strong>Reason of rejection:</strong> {{reqDetail.rejectReason}}</p>
            <p data-ng-show="reqDetail.rejectExtraInfo != '' && reqDetail.rejectExtraInfo != 'undefined'"><strong>Rejection info given to customer:</strong> {{reqDetail.rejectExtraInfo}}</p>
            <p><strong>Request Date: </strong>{{reqDate}}</p>
            <p><strong>Requested By: </strong>{{reqDetail.name}}</p>
            <p><strong>Email: </strong>{{reqDetail.userEmail}}</p>
            <p><strong>Company Name (if any): </strong>
                <span data-ng-show="reqDetail.companyName != 'null' && reqDetail.companyName != null">{{reqDetail.companyName}}</span>
                <span data-ng-show="reqDetail.companyName == 'null' || reqDetail.companyName == null">-</span>
            </p>
            <p><strong>Contact Number: </strong>{{reqDetail.contactNumber}}</p>
            <p><strong>Address: </strong>{{reqDetail.address}}{{reqDetail.companyAddress}}</p>
            <p><strong>Bin Type: </strong>{{reqDetail.type}}</p>
            <p><strong>Reason for Request: </strong>{{reqDetail.reason}}</p>
            <p><strong>Remarks: </strong>{{reqDetail.remarks}}</p>
            <p><strong>Pick Up:</strong>{{reqDetail.pickUp}}</p>
            <p><strong>Bin Serial No:</strong>{{reqDetail.binSerialNo}}</p>
            <br/>
            <p><strong>Status Updates History: </strong><div data-ng-repeat="brHistItem in brHistUpdateList">{{brHistItem}}</div></p>
        </div>
        <div class="col-md-6" id="test">
            <div class="row">
                <div class="col-md-10"><h3>Photo(s) attached</h3></div>
                <div class="col-md-2"><button data-ng-click="printBinReqImgPDF()" class="btn btn-primary">PDF</button></div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <h6>IC</h6>
                    <!-- <a href="../images/{{reqDetail.icImg}}" data-fancybox data-width="2048">
                        <img data-ng-src="../images/{{reqDetail.icImg}}" data-ng-show="reqDetail.icImg != null">
                    </a>
                    <p data-ng-show="reqDetail.icImg == '' || reqDetail.icImg == null">No image attached</p> -->
                    <a href="{{reqDetail.icImg}}" data-fancybox data-width="2048">
                        <img data-ng-src="{{reqDetail.icImg}}" data-ng-show="reqDetail.icImg != null">
                    </a>
                    <p data-ng-show="reqDetail.icImg == '' || reqDetail.icImg == null">No image attached</p>
                </div>

                <div class="col-md-6">
                    <h6>Bin Image</h6>
                    <!-- <a href="../images/{{reqDetail.binImg}}" data-fancybox data-width="2048">
                        <img data-ng-src="../images/{{reqDetail.binImg}}" data-ng-show="reqDetail.binImg != null">
                    </a>
                    <p data-ng-show="reqDetail.binImg == '' || reqDetail.binImg == null">No image attached</p> -->
                    <a href="{{reqDetail.binImg}}" data-fancybox data-width="2048">
                        <img data-ng-src="{{reqDetail.binImg}}" data-ng-show="reqDetail.binImg != null">
                    </a>
                    <p data-ng-show="reqDetail.binImg == '' || reqDetail.binImg == null">No image attached</p>
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-6">
                    <h6>Utility Bill</h6>
                    <!-- <a href="../images/{{reqDetail.utilityImg}}" data-fancybox data-width="2048">
                        <img data-ng-src="../images/{{reqDetail.utilityImg}}" data-ng-show="reqDetail.utilityImg != null">
                    </a>
                    <p data-ng-show="reqDetail.utilityImg == '' || reqDetail.utilityImg == null">No image attached</p> -->
                    <a href="{{reqDetail.utilityImg}}" data-fancybox data-width="2048">
                        <img data-ng-src="{{reqDetail.utilityImg}}" data-ng-show="reqDetail.utilityImg != null">
                    </a>
                    <p data-ng-show="reqDetail.utilityImg == '' || reqDetail.utilityImg == null">No image attached</p>
                </div>
                <div class="col-md-6">
                    <h6>Assessment Bill</h6>
                    <!-- <a href="../images/{{reqDetail.assessmentImg}}" data-fancybox data-width="2048">
                        <img data-ng-src="../images/{{reqDetail.assessmentImg}}" data-ng-show="reqDetail.assessmentImg != null">
                    </a>
                    <p data-ng-show="reqDetail.assessmentImg == '' || reqDetail.assessmentImg == null">No image attached
                    </p> -->
                    <a href="{{reqDetail.assessmentImg}}" data-fancybox data-width="2048">
                        <img data-ng-src="{{reqDetail.assessmentImg}}" data-ng-show="reqDetail.assessmentImg != null">
                    </a>
                    <p data-ng-show="reqDetail.assessmentImg == '' || reqDetail.assessmentImg == null">No image attached
                    </p>
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-6">
                    <h6>Trading License</h6>
                    <!-- <a href="../images/{{reqDetail.tradingImg}}" data-fancybox data-width="2048">
                        <img data-ng-src="../images/{{reqDetail.tradingImg}}" data-ng-show="reqDetail.tradingImg != null">
                    </a>
                    <p data-ng-show="reqDetail.tradingImg == '' || reqDetail.tradingImg == null">No image attached</p> -->
                    <a href="{{reqDetail.tradingImg}}" data-fancybox data-width="2048">
                        <img data-ng-src="{{reqDetail.tradingImg}}" data-ng-show="reqDetail.tradingImg != null">
                    </a>
                    <p data-ng-show="reqDetail.tradingImg == '' || reqDetail.tradingImg == null">No image attached</p>
                </div>
                <div class="col-md-6">
                    <h6>Police Report</h6>
                    <!-- <a href="../images/{{reqDetail.tradingImg}}" data-fancybox data-width="2048">
                        <img data-ng-src="../images/{{reqDetail.tradingImg}}" data-ng-show="reqDetail.tradingImg != null">
                    </a>
                    <p data-ng-show="reqDetail.tradingImg == '' || reqDetail.tradingImg == null">No image attached</p> -->
                    <a href="{{reqDetail.policeImg}}" data-fancybox data-width="2048">
                        <img data-ng-src="{{reqDetail.policeImg}}" data-ng-show="reqDetail.policeImg != null">
                    </a>
                    <p data-ng-show="reqDetail.policeImg == '' || reqDetail.policeImg == null">No image attached</p>
                </div>
            </div>
            <br /><br />
        </div>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.1/jspdf.debug.js" integrity="sha384-THVO/sM0mFD9h7dfSndI6TS0PgAGavwKvB5hAxRRvc0o9cPLohB0wb/PTA7LdUHs" crossorigin="anonymous"></script>
<script>
    function showRejectReasonSelect(element){
        document.getElementById('binReqRejectReason').style.display = element.value == "Rejected" ? 'block' : 'none';
    }

    function showRejectReasonRoroSelect(element){
        document.getElementById('binReqRejectReasonRoro').style.display = element.value == "Rejected" ? 'block' : 'none';
    }
</script>